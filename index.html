<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Desktop</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://kit.fontawesome.com/c32e56710f.js" crossorigin="anonymous"></script>
</head>

<body>
<div class="container">
  <div class="folder" data-folder="readme">
    <img src="sources/img/readme.png" alt="Readme">
    <p>Joordy</p>
  </div>
  <div class="folder" data-folder="gallery">
    <img src="sources/img/gallery.png" alt="Gallery">
    <p>Gallery</p>
  </div>
  <div class="folder" data-folder="projects">
    <img src="sources/img/projects.png" alt="Projects">
    <p>Projects</p>
  </div>
  <div class="folder" data-folder="contact">
    <img src="sources/img/contact.png" alt="Contact">
    <p>Contact</p>
  </div>
  <div class="folder" data-folder="mp3">
    <img src="sources/img/mp3.png" alt="MP3">
    <p>MP3</p>
  </div>
</div>

<div id="smallWindow-mp3" class="small-window">
  <div class="window-header">
    <p></p>
  </div>
  <div class="mp3container">
    <div class="music-player">
      <nav>
        <div class="circle">
          <i class="fa-solid fa-bars"></i>
        </div>
        <div class="circle close-icon">
          <i class="fa-solid fa-xmark"></i>
        </div>
      </nav>
      <img src="sources/img/mp3pics/Everybody%20Wants%20To%20Rule%20The%20World.jpg" class="song-img">
      <h1>Everybody Wants To Rule The World</h1>
      <p>Tears For Fears</p>

      <audio id="song">
        <source src="sources/mp3/Everybody%20Wants%20To%20Rule%20The%20World.mp3" type="audio/mpeg">
      </audio>
      <input type="range" value="0" id="progress">

    <div class="controls">
      <div><i class="fa-solid fa-backward"></i></div>
      <div onclick="playPause()"><i class="fa-solid fa-play" id="ctrlIcon"></i></div>
      <div><i class="fa-solid fa-forward"></i></div>
    </div>
    <script>
      let progress = document.getElementById('progress');
      let song = document.getElementById('song');
      let ctrlIcon = document.getElementById('ctrlIcon');

      song.onloadedmetadata = function(){
        progress.max = song.duration;
        progress.value = song.currentTime;
      }

      function playPause(){
        if (ctrlIcon.classList.contains('fa-pause')){
          song.pause();
          ctrlIcon.classList.remove('fa-pause');
          ctrlIcon.classList.add('fa-play');
        } else {
          song.play();
          ctrlIcon.classList.add('fa-pause');
          ctrlIcon.classList.remove('fa-play');
        }
      }

      if (song.play()){
        setInterval(()=>{
          progress.value = song.currentTime;
        },500);
      }

      progress.onchange = function(){
        song.play();
        song.currentTime = progress.value;
        ctrlIcon.classList.add('fa-pause');
        ctrlIcon.classList.remove('fa-play');
      }

      const songs = [
        {
          title: "Everybody Wants To Rule The World",
          artist: "Tears For Fears",
          src: "sources/mp3/Everybody%20Wants%20To%20Rule%20The%20World.mp3",
          img: "sources/img/mp3pics/Everybody%20Wants%20To%20Rule%20The%20World.jpg"
        },
        {
          title: "Hit in the USA",
          artist: "Beat Crusaders",
          src: "sources/mp3/Hit%20in%20the%20USA.mp3",
          img: "sources/img/mp3pics/Hit%20in%20the%20USA.jpg"
        },
        {
          title: "Mort ce Soir",
          artist: "Josman",
          src: "sources/mp3/Mort%20ce%20soir.mp3",
          img: "sources/img/mp3pics/Mort%20ce%20soir.jpg"
        },
        {
          title: "Out of Touch",
          artist: "Daryl Hall & John Oates",
          src: "sources/mp3/Out%20of%20Touch.mp3",
          img: "sources/img/mp3pics/Out%20of%20Touch.jpg"
        },
        {
          title: "Under your Spell",
          artist: "Snow Strippers",
          src: "sources/mp3/Under%20your%20spell.mp3",
          img: "sources/img/mp3pics/Under%20your%20spell.jpg"
        },
        {
          title: "We are the People",
          artist: "Empire of the Sun",
          src: "sources/mp3/We%20are%20the%20People.mp3",
          img: "sources/img/mp3pics/We%20are%20the%20People.jpg"
        }
      ];

      let currentSongIndex = 0;

      function loadSong(index) {
        const song = songs[index];
        document.querySelector('.song-img').src = song.img;
        document.querySelector('.music-player h1').innerText = song.title;
        document.querySelector('.music-player p').innerText = song.artist;
        document.getElementById('song').src = song.src;
        document.getElementById('song').load();
        playPause();
      }

      document.querySelector('.fa-forward').addEventListener('click', () => {
        currentSongIndex = (currentSongIndex + 1) % songs.length;
        loadSong(currentSongIndex);
        playPause();
      });

      document.querySelector('.fa-backward').addEventListener('click', () => {
        currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
        loadSong(currentSongIndex);
        playPause();
      });

      song.addEventListener("ended", function () {
        currentSongIndex = (currentSongIndex + 1) % songs.length;
        loadSong(currentSongIndex);
        playPause();
      });

      document.querySelectorAll('.closeBtn').forEach(button => {
        button.addEventListener('click', (event) => {
          const smallWindow = event.target.closest('.small-window');
          smallWindow.style.display = 'none';
          removeTaskbarIcon(smallWindow.id);
          if (smallWindow.id === 'smallWindow-mp3') {
            song.pause();
            ctrlIcon.classList.remove('fa-pause');
            ctrlIcon.classList.add('fa-play');
          }
        });
      });

      document.querySelectorAll('.close-icon').forEach(icon => {
        icon.addEventListener('click', (event) => {
          const smallWindow = event.target.closest('.small-window');
          smallWindow.style.display = 'none';
          removeTaskbarIcon(smallWindow.id);
          if (smallWindow.id === 'smallWindow-mp3') {
            song.pause();
            ctrlIcon.classList.remove('fa-pause');
            ctrlIcon.classList.add('fa-play');
          }
        });
      });

      loadSong(currentSongIndex);


    </script>
    </div>
  </div>
</div>

<div id="smallWindow-readme" class="small-window">
  <div class="window-header">
    <button class="minimizeBtn">_</button>
    Read me
    <button class="closeBtn">X</button>
  </div>
  <div class="text-container">
  <p>Hello, I'm Lucas or Joordy.
    <br/>I am a 1st year student at Estiam Bourges, passionate about technology and development.
  <br/>This is my humble attempt at creating a desktop-style portfolio/site.
  <br/>However it might not be the most professional kind of page, so I'm just having fun with this
  on free time to train!
  <br/>Hope you like this style, and feel free to reach out to me if you have any questions,tips or criticism!
  <br>I am all ears!</p>
  </div>
</div>

<div id="smallWindow-gallery" class="small-window">
  <div class="window-header">
    <button class="minimizeBtn">_</button>
    Gallery
    <button class="closeBtn">X</button>
  </div>
  <div id="galleryContent" class="gallery-content">
    <!-- Gallery images will be loaded here -->
  </div>
</div>

<div id="smallWindow-projects" class="small-window">
  <div class="window-header">
    <button class="minimizeBtn">_</button>
    Projects
    <button class="closeBtn">X</button>
  </div>
  <div class="container">
    <div class="project">
        <img src="sources/img/joordybar.png" onClick="window.open('https://github.com/Joordy18/JoordyBar')">
        <p>JoordyBar</p>
    </div>
    <div class="project">
        <img src="sources/img/memorygame.png" onClick="window.open('https://github.com/Joordy18/memory')">
        <p>Memory Game</p>
    </div>
  </div>
</div>

<div id="smallWindow-contact" class="small-window">
  <div class="window-header">
    <button class="minimizeBtn">_</button>
    Contact
    <button class="closeBtn">X</button>
  </div>
  <button class="contactButton" onclick="window.location.href='mailto:lucas.arcizet@estiam.com'">
    Contact
    <div class="iconButton">
      <svg
              height="24"
              width="24"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M0 0h24v24H0z" fill="none"></path>
        <path
                d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"
                fill="currentColor"
        ></path>
      </svg>
    </div>
  </button>
  <div class="card">
    <a class="socialContainer containerOne" href="https://www.tiktok.com/@joordybae">
      <svg fill="#000000" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" class="socialSvg tiktokSvg"> <path d="M19.589 6.686a4.793 4.793 0 0 1-3.77-4.245V2h-3.445v13.672a2.896 2.896 0 0 1-5.201 1.743l-.002-.001.002.001a2.895 2.895 0 0 1 3.183-4.51v-3.5a6.329 6.329 0 0 0-5.394 10.692 6.33 6.33 0 0 0 10.857-4.424V8.687a8.182 8.182 0 0 0 4.773 1.526V6.79a4.831 4.831 0 0 1-1.003-.104z"></path> </svg>
    </a>

    <a class="socialContainer containerTwo" href="https://x.com/schizocatpilled">
      <svg viewBox="0 0 16 16" class="socialSvg twitterSvg"> <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path> </svg>              </a>

    <a class="socialContainer containerThree" href="https://www.linkedin.com/in/lucas-arcizet-85530b2b5/">
      <svg viewBox="0 0 448 512" class="socialSvg linkedinSvg"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg>
    </a>

    <a class="socialContainer containerFour" href="https://github.com/Joordy18">
      <svg width="24" height="24" viewBox="0 0 24 24" class="socialSvg githubSvg"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
    </a>
  </div>
</div>

<div id="lightbox" class="lightbox">
  <span class="close-lightbox">&times;</span>
  <img id="lightbox-img" src="" alt="Fullscreen Image">
</div>


<footer>
  <div class="leftft">
    <div class="dropdown">
      <button class="startft">Start</button>
      <div class="dropdown-content">
        <button onclick="simulateClick('readme')">Joordy</button>
        <button onclick="simulateClick('gallery')">Gallery</button>
        <button onclick="simulateClick('projects')">Projects</button>
        <button onclick="simulateClick('contact')">Contact</button>
        <button onclick="simulateClick('mp3')">MP3</button>
      </div>
    </div>
  </div>
  <div id="taskbarIcons" class="middleft taskbar-icons"></div>
  <div class="rightft endft">
    <div id="dateTime">clock</div>
    <div>Built by Joordy</div>
  </div>
  <script>
    function simulateClick(folderName) {
      const folder = document.querySelector(`.folder[data-folder="${folderName}"]`);
      if (folder) {
        folder.click();
      }
    }
  </script>
</footer>

</body>
</html>
<script>
  document.querySelectorAll('.folder').forEach(folder => {
    folder.addEventListener('click', () => {
      const folderName = folder.getAttribute('data-folder');
      const smallWindow = document.getElementById(`smallWindow-${folderName}`);
      minimizeAllWindows();
      if (smallWindow.style.display !== 'block') {
        smallWindow.style.display = 'block';
        if (!taskbarIcons.querySelector(`button[data-window="smallWindow-${folderName}"]`)) {
          addTaskbarIcon(folder, folderName);
        }
        makeDraggable(smallWindow);
        if (folderName === 'gallery') {
          loadGalleryImages();
        }
      }
    });
  });

  function loadGalleryImages() {
    const galleryContent = document.getElementById('galleryContent');
    galleryContent.innerHTML = ''; // Clear existing content
    for (let i = 1; i <= 20; i++) {
      const img = document.createElement('img');
      img.src = `sources/img/gallerypics/${i}.jpg`;
      galleryContent.appendChild(img);
    }
  }

  document.querySelectorAll('.closeBtn').forEach(button => {
    button.addEventListener('click', (event) => {
      const smallWindow = event.target.closest('.small-window');
      smallWindow.style.display = 'none';
      removeTaskbarIcon(smallWindow.id);
    });
  });

  document.querySelectorAll('.minimizeBtn').forEach(button => {
    button.addEventListener('click', (event) => {
      const smallWindow = event.target.closest('.small-window');
      smallWindow.style.display = 'none';
    });
  });

  const taskbarIcons = document.getElementById('taskbarIcons');

  function addTaskbarIcon(folder, folderName) {
    const taskbarIcon = document.createElement('button');
    taskbarIcon.setAttribute('data-window', `smallWindow-${folderName}`);
    const icon = folder.querySelector('img').cloneNode();
    taskbarIcon.appendChild(icon);
    taskbarIcon.appendChild(document.createTextNode(` ${folderName}`));
    taskbarIcon.addEventListener('click', () => {
      const smallWindow = document.getElementById(`smallWindow-${folderName}`);
      smallWindow.style.display = 'block';
      taskbarIcon.remove();
    });
    taskbarIcons.appendChild(taskbarIcon);
  }

  function removeTaskbarIcon(smallWindowId) {
    const taskbarIcon = taskbarIcons.querySelector(`button[data-window="${smallWindowId}"]`);
    if (taskbarIcon) {
      taskbarIcon.remove();
    }
  }

  function makeDraggable(element) {
    const header = element.querySelector('.window-header');
    let offsetX = 0, offsetY = 0, mouseX = 0, mouseY = 0;

    header.onmousedown = (e) => {
      e.preventDefault();
      mouseX = e.clientX;
      mouseY = e.clientY;
      document.onmouseup = closeDragElement;
      document.onmousemove = elementDrag;
    };

    function elementDrag(e) {
      e.preventDefault();
      offsetX = mouseX - e.clientX;
      offsetY = mouseY - e.clientY;
      mouseX = e.clientX;
      mouseY = e.clientY;
      element.style.top = (element.offsetTop - offsetY) + "px";
      element.style.left = (element.offsetLeft - offsetX) + "px";
    }

    function closeDragElement() {
      document.onmouseup = null;
      document.onmousemove = null;
    }
  }

  function minimizeAllWindows() {
    document.querySelectorAll('.small-window').forEach(window => {
      window.style.display = 'none';
    });
  }

  options = {
    year: 'numeric', month: 'numeric', day: 'numeric',
    hour: 'numeric', minute: 'numeric'
  };
  const clock = () => dateTime.innerText = new Intl.DateTimeFormat('en-EN', options).format(new Date());
  clock();
  setInterval(clock, 1000);

  function enableImagePreview() {
    const galleryContent = document.getElementById('galleryContent');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const closeLightbox = document.querySelector('.close-lightbox');

    galleryContent.addEventListener('click', (event) => {
      if (event.target.tagName === 'IMG') {
        lightboxImg.src = event.target.src;
        lightbox.style.display = 'flex';
      }
    });

    closeLightbox.addEventListener('click', () => {
      lightbox.style.display = 'none';
    });

    lightbox.addEventListener('click', (event) => {
      if (event.target === lightbox) {
        lightbox.style.display = 'none';
      }
    });
  }

  document.addEventListener("DOMContentLoaded", enableImagePreview);

  document.querySelectorAll('.close-icon').forEach(icon => {
    icon.addEventListener('click', (event) => {
      const smallWindow = event.target.closest('.small-window');
      smallWindow.style.display = 'none';
      removeTaskbarIcon(smallWindow.id);
    });
  });

</script>